{let e,t,r,o,n,l,s,i,f,w,h,d,a,u,_,c,S,g,m,y,b,v,j,x,O,P,V;i=Object.getPrototypeOf,w={},h=i(f={isConnected:1}),d=i(i),a=(e,t,r,o)=>(e??(setTimeout(r,o),new Set)).add(t),u=(e,t,o)=>{let n=r;r=t;try{return e(o)}catch(e){return console.error(e),o}finally{r=n}},_=e=>e.filter(e=>e.t?.isConnected),c=e=>n=a(n,e,()=>{for(let e of n)e.o=_(e.o),e.l=_(e.l);n=s},1e3),S={get val(){return r?.i?.add(this),this.rawVal},get oldVal(){return r?.i?.add(this),this.h},set val(o){r?.u?.add(this),o!==this.rawVal&&(this.rawVal=o,this.o.length+this.l.length?(t?.add(this),e=a(e,this,P)):this.h=o)}},g=e=>({__proto__:S,rawVal:e,h:e,o:[],l:[]}),m=(e,t)=>{let r={i:new Set,u:new Set},n={f:e},l=o;o=[];let s=u(e,r,t);s=(s??document).nodeType?s:new Text(s);for(let e of r.i)r.u.has(e)||(c(e),e.o.push(n));for(let e of o)e.t=s;return o=l,n.t=s},y=(e,t=g(),r)=>{let n={i:new Set,u:new Set},l={f:e,s:t};l.t=r??o?.push(l)??f,t.val=u(e,n,t.rawVal);for(let e of n.i)n.u.has(e)||(c(e),e.l.push(l));return t},b=(e,...t)=>{for(let r of t.flat(1/0)){let t=i(r??0),o=t===S?m(()=>r.val):t===d?m(r):r;o!=s&&e.append(o)}return e},v=(e,t,...r)=>{let[o,...n]=i(r[0]??0)===h?r:[{},...r],l=e?document.createElementNS(e,t):document.createElement(t);for(let[e,r]of Object.entries(o)){let o=t=>t?Object.getOwnPropertyDescriptor(t,e)??o(i(t)):s,n=t+","+e,f=w[n]??(w[n]=o(i(l))?.set??0),h=e.startsWith("on")?(t,r)=>{let o=e.slice(2);l.removeEventListener(o,r),l.addEventListener(o,t)}:f?f.bind(l):l.setAttribute.bind(l,e),a=i(r??0);e.startsWith("on")||a===d&&(r=y(r),a=S),a===S?m(()=>(h(r.val,r.h),l)):h(r)}return b(l,...n)},j=e=>({get:(t,r)=>v.bind(s,e,r)}),x=new Proxy(e=>new Proxy(v,j(e)),j()),O=(e,t)=>t?t!==e&&e.replaceWith(t):e.remove(),P=()=>{let r=0,o=[...e].filter(e=>e.rawVal!==e.h);do{t=new Set;for(let e of new Set(o.flatMap(e=>e.l=_(e.l))))y(e.f,e.s,e.t),e.t=s}while(++r<100&&(o=[...t]).length);let n=[...e].filter(e=>e.rawVal!==e.h);e=s;for(let e of new Set(n.flatMap(e=>e.o=_(e.o))))O(e.t,m(e.f,e.t)),e.t=s;for(let e of n)e.h=e.rawVal;l?.(),l=s},V={add:b,tags:x,state:g,derive:y,hydrate:(e,t)=>O(e,m(t,e)),render:()=>new Promise(e=>l=e)},window.van=V;}